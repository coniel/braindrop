---
metaTitle: RichTextFragment
metaDescription: The lowest level content of rich text documents.
---

# RichTextFragment

<Description>
  The lowest level content of rich text documents.
</Description>

A rich text fragment is simply an array of [`RichTextNode`](rich-text-node) and [`RichTextInlineElement`](rich-text-inline-element) objects.

A fragment must always contain at least one `RichTextNode`. If the rich text fragment is 'empty' (e.g. a new paragraph element was inserted into the editor but no text has been typed into it yet), the fragment must consist on a single `RichTextNode` with its text set to an empty string:

```ts
// An empty fragment
const fragment = [{ text: '' }];
```

A fragment's `RichTextInlineElement`s must be surounded by `RichTextNode`s, and must always start and end with a `RichTextNode`. These can be empty nodes if there is no text content between the inline elements:

The text "[Mass-energy equivalence](https://en.wikipedia.org/wiki/Mass-energy_equivalence) formula: `e=mc^2`" would have a fragment resembling the following:

```ts
// A fragment with inline elements
const fragment = [
  { text: '' },
  {
    type: 'link',
    url: 'https://en.wikipedia.org/wiki/Mass-energy_equivalence',
    children: [{ text: 'Mass-energy equivalence'}]
  },
  { text: ' formula: ' }
  {
    type: 'equation',
    expression: 'e=mc^2'
  },
  { text: '' },
];
```

## Selection fragments

Rich text fragments are also used to represent the text selection in the editor.

If the selection covers only part of the text in a `RichTextNode`, the resulting selection fragment will include only the selected text.

For example if a section of the text:

_Here is some **bold** text._

were selected like so:

_Here is `some bold text`._

the fragments would look like:

```ts
// The complete fragment
const fragment = [
  { text: 'Here is some ' },
  { text: 'bold', bold: true },
  { text: ' text.' },
];

// The selected text fragment
const selectionFragment = [
  { text: 'some ' },
  { text: 'bold', bold: true },
  { text: ' text' },
];
```

If the selection contains part of the text inside a non-void inline element (e.g. a link element), the `children` of the element will contain only the selected text as part of the selection fragment.

For example if a section of the text:

_[Enstein's Mass-energy equivalence formula](https://en.wikipedia.org/wiki/Mass-energy_equivalence)_

were selected like so:

_[Enstein's `Mass-energy equivalence` forumla](https://en.wikipedia.org/wiki/Mass-energy_equivalence)_

the fragments would look like:

```ts
// The complete fragment
const fragment = [
  { text: '' },
  {
    type: 'link',
    url: 'https://en.wikipedia.org/wiki/Mass-energy_equivalence',
    children: [
      { text: "Einsteni's Mass-energy equivalence formula" },
    ],
  },
  { text: '' },
];

// The selected text fragment
const selectionFragment = [
  { text: '' },
  {
    type: 'link',
    url: 'https://en.wikipedia.org/wiki/Mass-energy_equivalence',
    children: [{ text: 'Mass-energy equivalence' }],
  },
  { text: '' },
];
```
