---
metaTitle: Views API Interface
metaDescription: An interface for retrieving and managing views.
---

# Views

<Description>
  An interface for retrieving and managing views.
</Description>

## Hooks

Hooks provide access to views and related data from inside React components. Unlike data accessed using static methods, hooks will cause the component to rerender when the data changes.

### useViewInstance

Returns a view instance by ID or `null` if no view instance was found.

```ts
useViewInstance<T extends ViewInstance>(viewInstanceId: string): T | null
```

<ArgsTable
  data={[
    {
      name: 'viewInstanceId',
      type: 'string',
      required: true,
      description: 'The ID of the view instance to retrieve.',
    },
  ]}
/>

### useViewInstances

Returns a `{ [id]: ViewInstance | null }` map of view instances matching the provided IDs (`null` if the view instance does not exist).

```ts
useViewInstances<T extends ViewInstance>(viewInstanceIds: string[]): ViewInstanceMap<T>
```

<ArgsTable
  data={[
    {
      name: 'viewInstanceIds',
      type: 'string[]',
      required: true,
      description: 'The IDs of the view instances to retrieve.',
    },
  ]}
/>

## Static methods

### get

Returns a view by ID. Throws a `ViewNotRegisteredError` if the requested view is not registered.

```ts
Views.get(viewId: string): View
```

<ArgsTable
  data={[
    {
      name: 'viewId',
      type: 'string',
      required: true,
      description: 'The ID of the view to retrieve.',
    },
  ]}
/>

### getInstance

Returns a view instance by ID. Throws a `ViewInstanceNotFoundError` if the view instance does not exist.

```ts
Views.getInstance<T extends ViewInstance>(viewInstanceId: string): T
```

<ArgsTable
  data={[
    {
      name: 'viewInstanceId',
      type: 'string',
      required: true,
      description: 'The ID of the view instance to retrieve.',
    },
  ]}
/>

### getInstances

Returns a `{ [id]: ViewInstance | null }` map of view instances matching the provided IDs (`null` if the view instance does not exist).

```ts
Views.getInstances<T extends ViewInstance>(viewInstanceIds: string[]): ViewInstanceMap<T>
```

<ArgsTable
  data={[
    {
      name: 'viewInstanceIds',
      type: 'string[]',
      required: true,
      description: 'The IDs of the view instances to retrieve.',
    },
  ]}
/>

### register

Registers a new view and dispatches a `views:register` event. View need to be registered before they can be opened.

```ts
Views.register(core: Core, view: ViewConfig): void
```

<ArgsTable
  core
  data={[
    {
      name: 'view',
      type: 'ViewConfig',
      required: true,
      description: (
        <span>
          The view to register. See the{' '}
          <a href="/docs/extensions/types/view-config">View</a>{' '}
          interface for details.
        </span>
      ),
    },
  ]}
/>

### unregister

Unregisters a view and dispaches a `views:unregister` event.

```ts
Views.unregsiter(core: Core, viewId: string): void
```

<ArgsTable
  core
  data={[
    {
      name: 'viewId',
      type: 'string',
      required: true,
      description: 'The ID of the view to unregister.',
    },
  ]}
/>

### createInstance

Creates a new view instance and dispatches a `views:create-instance` event. Returns the new view instance.

```ts
Views.createInstance<
    D extends CreateViewInstanceData,
    I extends ViewInstance,
>(core: Core, data: D): I
```

<ArgsTable
  core
  data={[
    {
      name: 'data',
      type: 'CreateViewInstanceData',
      required: true,
      description:
        'The view instance data. See the below for details.',
    },
  ]}
/>

#### `CreateViewInstanceData`

<InterfaceTable
  data={[
    {
      name: 'view',
      type: 'string',
      required: true,
      description:
        'The ID of the view rendered by this view instance. The view in question must first be registered.',
    },
  ]}
/>

Additionally, view instances support adding any custom data fields needed for the view. The only restricted fields are `id`, `createdAt`, and `updatedAt` which are automatically generated by the `createInstance` method.

### updateInstance

Updates a view instance and dispaches a `views:update-instance` event. Returns the updated view instance.

```ts
Views.updateInstance<
    D extends UpdateViewInstanceData,
    I extends ViewInstance,
>(core: Core, viewInstanceId: string, data: D): I
```

<ArgsTable
  core
  data={[
    {
      name: 'viewInstanceId',
      type: 'string',
      required: true,
      description: 'The ID of the view instance to update.',
    },
    {
      name: 'data',
      type: 'UpdateViewInstanceData',
      required: true,
      description: (
        <span>
          The updates to apply to the resouce view. Supports{' '}
          <a href="/docs/extensions/api/utils#fieldvalue">
            <Code>FieldValue</Code>
          </a>
          mutations. See below for details.
        </span>
      ),
    },
  ]}
/>

#### `UpdateViewInstanceData`

Supports [`FieldValue`](/docs/extensions/api/utils#fieldvalue) mutations.

<InterfaceTable
  data={[
    {
      name: 'view',
      type: 'string',
      description:
        'The ID of the view rendered by this view instance.',
    },
  ]}
/>

Additionally, view instances support adding/modifying any custom data fields needed for the view. The only restricted fields are `id`, `createdAt`, and `updatedAt` which are automatically generated by the `createInstance` method.

### deleteInstance

Deletes a view instance and dispatches a `views:delete-instance` event. Returns the deleted view instance.

```ts
Views.deleteInstance<T extends ViewInstance>(core: Core, viewInstanceId: string): T
```

<ArgsTable
  core
  data={[
    {
      name: 'viewInstanceId',
      type: 'string',
      required: true,
      description: 'The ID of the view instance to delete.',
    },
  ]}
/>

### loadInstances

Loads view instances into the store and dispatches a `views:load-instances` event.

```ts
Views.loadInstances(core: Core, viewInstances: ViewInstance[]): void
```

<ArgsTable
  core
  data={[
    {
      name: 'viewInstances',
      type: 'ViewInstance[]',
      required: true,
      description: 'The view instances to load into the store.',
    },
  ]}
/>

### clear

Clears all registered views and view instances from the store and dispatches a `views:clear` event.

```ts
Views.clear(core: Core): void
```

<ArgsTable core />

### addEventListener

Adds view specific event listeners. Equivalent to calling `addEventListener` directly on `core`, but provides more advanced type definitions.

```ts
Views.addEventListener(core: Core, event: ViewEvent, callback: EventListenerCallback): void
```

<ArgsTable
  core
  data={[
    {
      name: 'event',
      type: 'ViewEvent',
      required: true,
      description:
        'The event type to listen for. See the view events section below for available events.',
    },
    {
      name: 'callback',
      type: 'EventListenerCallback',
      required: true,
      description:
        'The callback fired when the event occurs. See the view events section below for the data passed to the callback.',
    },
  ]}
/>

### removeEventListener

Removes view specific event listeners. Equivalent to calling `removeEventListener` directly on `core`, but provides more advanced type definitions.

```ts
Views.removeEventListener(core: Core, event: ViewEvent, callback: EventListenerCallback): void
```

<ArgsTable
  core
  data={[
    {
      name: 'event',
      type: 'ViewEvent',
      required: true,
      description:
        'The event type for which to remove the event listener.',
    },
    {
      name: 'callback',
      type: 'EventListenerCallback',
      required: true,
      description: 'The callback of the event listener to remove.',
    },
  ]}
/>

## View events

View events are prefixed with the namespace `views`.

See below the table for more details on the data passed by view related events.

<EventsTable
  data={[
    {
      name: 'views:register',
      data: 'View',
      description: 'Dispatched when a view is registered.',
    },
    {
      name: 'views:unregister',
      data: 'View',
      description: 'Dispatched when a view is unregistered.',
    },
    {
      name: 'views:create-instance',
      data: 'ViewInstance',
      description: 'Dispatched when a view instance is created.',
    },
    {
      name: 'views:update-instance',
      data: 'UpdateViewInstanceEventData',
      description: 'Dispatched when a view instance is updated.',
    },
    {
      name: 'views:delete-instance',
      data: 'ViewInstance',
      description: 'Dispatched when a view instance is deleted.',
    },
    {
      name: 'views:load-instances',
      data: 'ViewInstance[]',
      description:
        'Dispatched when view instances are loaded into the store.',
    },
    {
      name: 'views:clear',
      description: 'Dispatched when the views store is cleared.',
    },
  ]}
/>

### View event data types

View events are dispatched with one of the following types of data.

#### View

See the [View](/docs/extensions/types/view) interface page.

#### ViewInstance

See the [ViewInstance](/docs/extensions/types/view-instance) interface page.

#### UpdateViewInstanceEventData

<InterfaceTable
  data={[
    {
      name: 'before',
      type: 'ViewInstance',
      required: true,
      description: 'ViewInstance data before it was changed.',
    },
    {
      name: 'after',
      type: 'ViewInstance',
      required: true,
      description: 'Updated view instance data.',
    },
    {
      name: 'changes',
      type: 'ViewInstanceChanges',
      required: true,
      description:
        'The changes made to the view instance. See below for details.',
    },
  ]}
/>

`ViewInstanceChanges`

<InterfaceTable
  data={[
    {
      name: 'updatedAt',
      type: 'Date',
      required: true,
      description:
        'The timestamp at which the view instance was updated.',
    },
    {
      name: 'view',
      type: 'string',
      description:
        'The ID of the view rendered by this view instance.',
    },
  ]}
/>

Additionally, view instances support adding/modifying custom data fields which will be included in the `ViewInstanceChanges` data if changed.
